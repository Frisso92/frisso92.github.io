<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowbox</title>
    <link rel="stylesheet" type="text/css" href="./css/main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

</head>

<body>
    <div class="header">
        <h1>FLOWBOX üåÄ</h1>
        <p id="plan-title">Plan de Estudios</p>
    </div>

    <div class="header-right">
        <button id="export-pdf-btn" class="export-btn" style="display: none;" title="Exportar diagrama a PDF">
            üìÑ Exportar PDF
        </button>
    </div>

    <div class="plan-selector" id="plan-selector">
        <select class="plan-select" id="plan-select">
            <option value="">üìö Seleccionar Plan de Estudios...</option>
        </select>
    </div>

    <div class="content" , id="content">
        <div class="progress">
            <h2 class="porcentage-completed" id="porcentage-completed"></h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>


        <!-- Vista Lista (existente) -->
        <div class="view-container" id="list-view">
            <div class="container">
                <div class="panel">
                    <div class="panel-header">
                        <h2 id="completed-count">‚úÖ Materias Completadas</h2>
                        <div class="counter">Marc√° las que ya completaste</div>
                    </div>
                    <div class="panel-content">
                        <div id="loading">Selecciona un plan de estudios para comenzar</div>
                        <div id="materias-list" style="display: none;"></div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header available">
                        <h2 id="available-count">üéØ Materias Disponibles</h2>
                        <div class="counter">Pod√©s cursar estas materias</div>
                    </div>
                    <div class="panel-content">
                        <div id="available-list">
                            <div class="empty-state">
                                <span style="font-size: 3rem;">üéØ</span>
                                <div>Selecciona un plan de estudios para comenzar</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Vista Diagrama -->
        <div class="view-container" id="diagram-view">
            <div class="diagram-controls">
                <div class="controls-left">
                    <button id="add-level-btn" title="Agregar Periodo">‚ûï Periodo</button>
                </div>
                <div class="legend">
                    <span class="legend-item completed">Completadas</span>
                    <span class="legend-item available">Disponibles</span>
                    <span class="legend-item blocked">Bloqueadas</span>
                    <span class="legend-item unassigned">Sin asignar</span>
                </div>
            </div>
            <div class="distribution-controls">
                <h3>‚öôÔ∏è Configuraci√≥n de Distribuci√≥n Autom√°tica</h3>
                <div class="controls-row">
                    <div class="controls-left">
                        <div class="control-group">
                            <label for="max-materias-per-level">M√°ximo de materias por periodo:</label>
                            <input type="number" id="max-materias-per-level" min="1" max="20" value="6">
                        </div>
                        <div class="control-group">
                            <label for="max-carga-per-level">M√°xima carga horaria por periodo:</label>
                            <input type="number" id="max-carga-per-level" min="50" max="1000" step="50" value="300">
                        </div>
                        <button id="auto-distribute-btn" class="distribute-btn">üîÑ Distribuir Autom√°ticamente</button>
                    </div>
                    <div class="controls-right">
                        <button id="reset-btn" class="reset-btn" title="Resetear todas las materias y progreso">
                            üîÑ Reset Completo
                        </button>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-viewport" id="diagram-viewport">
                    <div class="diagram-content" id="diagram-content">
                        <div id="diagram-loading" class="diagram-loading">
                            Selecciona un plan de estudios para ver el diagrama
                        </div>
                        <div id="levels-container"></div>
                    </div>
                </div>
            </div>
        </div>

        <script src="./js/main.js"></script>
</body>

</html>